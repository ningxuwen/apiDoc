 ## 天使音乐学校端管理后台接口说明

### 版本信息

版本        | 修改日期		| 修改人  | 修改记录
:---------- |:-------------|:-----|:--------
1.0.0    | 2017/02/07 | 王勇 | 创建文档

### 系统级别错误码
## 系统错误码
|错误码 | 描述 |
:--------|:-------|
-1 | 系统异常|
200 | 操作成功|
201 | 操作失败|


## 接口请求域名或者id
* http://192.168.1.126/schoolManage

## 接口描述

### 版本管理接口
#### 登录
* [1.登录](#1-1)
* [2.修改密码](#1-2)
* [3.首页](#1-3)

#### 学生管理
* [1.班级列表](#2-1)
* [2.学生管理页](#2-2)
* [3.学生详情](#2-3)
* [4.修改学生信息](#2-4)
* [5.添加学生](#2-5)
* [6.批量上传学生信息](#2-6)
* [7.批量注册学生信息](#2-7)
* [8.批量修改学生班级和状态](#2-8)

### 教师管理
* [1.老师列表](#3-1)
* [2.新增老师](#3-2)
* [3.批量更改老师的班级或者状态](#3-3)
* [4.查看老师信息](#3-4)
* [5.修改老师信息](#3-5)

### 接口详情

<h3 id="1-1">1.登录</h3>

#### 接口名字：
* /login.json

#### 接口请求方式：
* POST

#### 接口请求参数
参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
phone|true|string|手机号码
password|true|string|密码

#### 接口返回结果
* 正确返回：
```
{
    "code":200,
    "description":"请求成功",
    "detail":{
        "avatar":null,
        "createTime":null,
        "firstLogin":2,
        "id":null,
        "nickName":"wangwu",
        "password":null,
        "phone":"13584040966",
        "school":null,
        "schoolId":1,
        "schoolName":null,
        "status":0,
        "token":null,
        "type":2
    }
}
```
* 错误返回
```
{ "code": xxxxxxx, "description": "xxxxxxxx","detail":null}
```

#### 接口错误码
错误码 | 说明 |
|:-----|:-----
80012|用户名或者密码错误
80006|登录手机号为空
80007|登录密码为空
80009|用户已经登录
80011|用户首次登录

<h3 id="1-2">2.修改密码</h3>

#### 接口名字：
* /editUserPwd.json

#### 接口请求方式：
* POST

#### 接口请求参数
参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
account|true|string|用户账号(手机号码)
password|true|string|密码
rePassword|true|string|再次输入的密码

#### 接口返回结果
* 正确返回：
```
{"code":200,"description":"请求成功","detail":null}
```
* 错误返回
```
{ "code": xxxxxxx, "description": "xxxxxxxx","detail":null}
```

#### 接口错误码
错误码 | 说明 |
|:-----|:-----
80020|账号为空
80021|密码为空
80022|再次输入的密码为空
80025|密码不符合规则
80024|用户不存在

<h3 id="1-3">3.首页</h3>

#### 接口名字：
* /index.json

#### 接口请求方式：
* GET

#### 接口请求参数


#### 接口返回结果
* 正确返回：
```
{
    "code":200,
    "description":"请求成功",
    "detail":{
        "hasNext":false,
        "hasPre":false,
        "nextPage":1,
        "pageNo":1,
        "pageSize":10,
        "prePage":1,
        "rows":[
            {
                "content":null,
                "createDate":"2017-02-08 17:07:17",
                "id":1,
                "schoolId":1,
                "state":1,
                "title":"notice!!!",
                "type":1
            }
        ],
        "totalCount":1,
        "totalPage":1
    }
}
```
* 错误返回
```

```

#### 接口错误码

<h3 id="2-1">4.班级列表</h3>

#### 接口名字：
* /stu/grades

#### 接口请求方式：
* GET

#### 接口请求参数


#### 接口返回结果
* 正确返回：
```
{
    "code": 200,
    "description": "请求成功",
    "detail": [
        {
            "gName": "一年级",
            "gid": 1,
            "classArray": [
                {
                    "cName": "一班",
                    "cid": 1
                }
            ]
        },
        {
            "gName": "二年级",
            "gid": 2,
            "classArray": [
                {
                    "cName": "一班",
                    "cid": 3
                }
            ]
        }
    ]
}
```
* 错误返回
```

```

#### 接口错误码


<h3 id="2-2">2.获取学生列表</h3>

#### 接口名字：
* /stu/stuList

#### 接口请求方式：
* GET

#### 接口请求参数
参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
pageNo|false|int|页码
stuName|false|string|学生姓名
classId|true|int|班级编号


#### 接口返回结果
* 正确返回：
```
{
    "code": 200,
    "description": "请求成功",
    "detail": {
        "hasNext": false,
        "hasPre": false,
        "nextPage": 1,
        "pageNo": 1,
        "pageSize": 10,
        "prePage": 1,
        "rows": [
            {
                "address": null,
                "age": 23,
                "classId": null,
                "className": null,
                "entrancetime": "2017-02-07 15:53:12",
                "gender": 1,
                "id": 1,
                "name": "李四",
                "phone": "13584040965",
                "schoolId": null,
                "state": 1,
                "studentNo": null
            },
            {
                "address": null,
                "age": 24,
                "classId": null,
                "className": null,
                "entrancetime": "2017-02-10 11:14:55",
                "gender": 1,
                "id": 2,
                "name": "wangwu",
                "phone": "13584040988",
                "schoolId": null,
                "state": 1,
                "studentNo": null
            }
        ],
        "totalCount": 2,
        "totalPage": 1
    }
}
```
* 错误返回
```

```

#### 接口错误码

<h3 id="2-3">3.学生详情</h3>

#### 接口名字：
* /stu/stuInfo

#### 接口请求方式：
* GET

#### 接口请求参数
参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
stuId|true|int|学生编号

#### 接口返回结果
* 正确返回：
```
{
    "code": 200,
    "description": "请求成功",
    "detail": {
        "entranceTime": 1486453992000,
        "address": null,
        "stuId": 1,
        "gender": 1,
        "phone": "13584040965",
        "className": "一年级一班",
        "stuName": "李四",
        "age": 23,
        "stuNo": null,
        "status": 1
    }
}
```
* 错误返回
```

```

#### 接口错误码


<h3 id="2-4">4.修改学生信息</h3>

#### 接口名字：
* /stu/editStuInfo.json

#### 接口请求方式：
* POST

#### 接口请求参数
参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
stuId|true|int|学生编号
phone|false|string|紧急联系人电话
stuName|false|string|学生姓名
gender|false|int|性别
age|false|int|年龄
address|false|string|地址
classId|false|int|班级编号
entranceTime|false|Date|入学时间
status|false|int|状态

#### 接口返回结果
* 正确返回：
```
{"code":200,"description":"请求成功","detail":null}
```
* 错误返回
```

```

#### 接口错误码

<h3 id="2-5">5.添加学生信息</h3>

#### 接口名字：
* /stu/addStuInfo.json

#### 接口请求方式：
* POST

#### 接口请求参数
参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
phone|false|string|紧急联系人电话
stuName|false|string|学生姓名
gender|false|int|性别
age|false|int|年龄
address|false|string|地址
classId|false|int|班级编号
entranceTime|false|Date|入学时间
status|false|int|状态

#### 接口返回结果
* 正确返回：
```
{"code":200,"description":"请求成功","detail":null}
```
* 错误返回
```

```

#### 接口错误码
错误码 | 说明 |
|:-----|:-----
1004|手机号不合法
80046|手机号码已经存在，请确认手机号码
80044|保存失败,请重新保存

<h3 id="2-6">6.批量上传学生信息</h3>

#### 接口名字：
* /stu/uploadStus.json

#### 接口请求方式：
* POST

#### 接口请求参数
参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------


#### 接口返回结果
* 正确返回：
```
{
    "code": 200,
    "description": "请求成功",
    "detail": [
        {
            "entranceTime": "2017-01-18",
            "address": null,
            "gender": 0,
            "phone": "10100002002",
            "stuName": "学生1"
        },
        {
            "entranceTime": "2017-01-18",
            "address": null,
            "gender": 0,
            "phone": "10100002003",
            "stuName": "学生2"
        },
        {
            "entranceTime": "2017-01-18",
            "address": null,
            "gender": 0,
            "phone": "10100002004",
            "stuName": "学生3"
        },
        {
            "entranceTime": "2017-01-18",
            "address": null,
            "gender": 0,
            "phone": "10100002005",
            "stuName": "学生4"
        }
    ]
}
```
* 错误返回
```

```

#### 接口错误码
错误码 | 说明 |
|:-----|:-----


<h3 id="2-7">7.批量注册学生信息</h3>

#### 接口名字：
* /stu/batchRegisterStus.json

#### 接口请求方式：
* POST

#### 接口请求参数
参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
phone|false|string|紧急联系人电话
stuName|false|string|学生姓名
gender|false|int|性别
age|false|int|年龄
address|false|string|地址
classId|false|int|班级编号
entranceTime|false|Date|入学时间
status|false|int|状态


#### 接口返回结果
* 正确返回：
```
{
    "code": 200,
    "description": "请求成功",
    "detail": [
        {
            "code": 80035,
            "phone": "13584040976",
            "stuName": "杰克"
        },
        {
            "code": 80035,
            "phone": "13584040076",
            "stuName": "rose"
        },
        {
            "code": 80035,
            "phone": "13584040006",
            "stuName": "tom"
        },
        {
            "code": 80035,
            "phone": "13584040966",
            "stuName": "哈哈"
        }
    ]
}
```
* 错误返回
```

```

#### 接口错误码
错误码 | 说明 |
|:-----|:-----
80035|手机号已经绑定过

<h3 id="2-8">8.批量修改学生班级或者状态</h3>

#### 接口名字：
* /stu/batchRegisterStus.json

#### 接口请求方式：
* POST

#### 接口请求参数
参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
stuIds|true|array|学生编号
classId|false|int|班级编号
status|false|int|学生状态


#### 接口返回结果
* 正确返回：
```
{"code":200,"description":"请求成功","detail":null}
```
* 错误返回
```

```

#### 接口错误码
错误码 | 说明 |
|:-----|:-----
80050|学生批量修改失败

<h3 id="3-1">1.老师列表</h3>

#### 接口名字：
* /stu/batchRegisterStus.json

#### 接口请求方式：
* GET

#### 接口请求参数
参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
teacherName|false|string|教师姓名
pageNo|false|int|页码


#### 接口返回结果
* 正确返回：
```
{
    "code": 200,
    "description": "请求成功",
    "detail": {
        "pageNo": 1,
        "totalPage": 1,
        "pagesize": 10,
        "totalCount": 1,
        "rows": [
            {
                "teacherId": 1,
                "teacherName": "wangwu",
                "level": 1
            }
        ]
    }
}
```
* 错误返回
```

```

#### 接口错误码
错误码 | 说明 |
|:-----|:-----



